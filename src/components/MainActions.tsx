import {$isSidebar, $notes, $selectedNote, getNoteById, saveNote} from "@/utils/Store";
import React, {useEffect} from "react";
import "@/styles/MainActions.scss"
import {useStore} from "@nanostores/react";

export default function MainActions() {
    const notes = useStore($notes);
    const selectedNote = useStore($selectedNote);

    return <>
        <div className={`main_actions ${selectedNote == null ? "unselected" : ""}`}>
            <div onClick={() => $isSidebar.set(!$isSidebar.get())} className="main_actions-burger">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.75 8.75H1.25C0.559648 8.75 0 9.30965 0 10C0 10.6904 0.559648 11.25 1.25 11.25H18.75C19.4404 11.25 20 10.6904 20 10C20 9.30965 19.4404 8.75 18.75 8.75Z" fill="white"/>
                    <path d="M1.25 5.41669H18.75C19.4404 5.41669 20 4.85704 20 4.16669C20 3.47634 19.4404 2.91669 18.75 2.91669H1.25C0.559648 2.91669 0 3.47634 0 4.16669C0 4.85704 0.559648 5.41669 1.25 5.41669Z" fill="white"/>
                    <path d="M18.75 14.5833H1.25C0.559648 14.5833 0 15.143 0 15.8333C0 16.5237 0.559648 17.0833 1.25 17.0833H18.75C19.4404 17.0833 20 16.5237 20 15.8333C20 15.143 19.4404 14.5833 18.75 14.5833Z" fill="white"/>
                </svg>
            </div>
            {selectedNote != null && <>
                <div onClick={() => saveNote()} className="main_actions-save">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.99999 13.3334C10.9205 13.3334 11.6667 12.5872 11.6667 11.6667C11.6667 10.7462 10.9205 10 9.99999 10C9.07951 10 8.33331 10.7462 8.33331 11.6667C8.33331 12.5872 9.07951 13.3334 9.99999 13.3334Z" fill="#9B9B9B"/>
                        <path d="M18.78 3.435L16.565 1.22C16.3433 1.00184 16.0979 0.809258 15.8333 0.64582V2.5C15.8305 4.80004 13.9667 6.66391 11.6666 6.66668H8.33331C6.03328 6.66391 4.16941 4.80004 4.16668 2.5V0C1.86664 0.00277344 0.00277344 1.86664 0 4.16668V15.8334C0.00277344 18.1334 1.86664 19.9973 4.16668 20H15.8333C18.1333 19.9973 19.9972 18.1334 20 15.8334V6.38086C20.0031 5.27535 19.5638 4.21457 18.78 3.435ZM9.99999 15C8.15906 15 6.66667 13.5076 6.66667 11.6667C6.66667 9.82574 8.15906 8.33336 9.99999 8.33336C11.8409 8.33336 13.3333 9.82574 13.3333 11.6667C13.3333 13.5076 11.8409 15 9.99999 15Z" fill="#9B9B9B"/>
                        <path d="M8.33333 4.99996H11.6666C13.0473 4.99996 14.1666 3.88066 14.1666 2.49996V0.0533203C13.9855 0.0237891 13.8026 0.00597656 13.6191 0H5.83333V2.5C5.83333 3.88066 6.95262 4.99996 8.33333 4.99996Z" fill="#9B9B9B"/>
                    </svg>
                </div>
                <div onClick={() => {
                    selectedNote.isFavorite = !selectedNote.isFavorite;
                    $notes.set([...$notes.get()])
                }} className={`main_actions-favorite ${selectedNote.isFavorite ? "active" : ""}`}>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clipPath="url(#clip0_11_26)">
                            <path d="M2.37417 19.625C2.8292 19.8195 3.33229 19.8723 3.81779 19.7766C4.3033 19.6808 4.74868 19.441 5.09583 19.0883L10 14.2108L14.9042 19.0883C15.1328 19.3203 15.4052 19.5047 15.7056 19.6307C16.006 19.7567 16.3284 19.8219 16.6542 19.8225C16.989 19.8215 17.3203 19.7544 17.6292 19.625C18.0879 19.4393 18.48 19.1197 18.7543 18.7077C19.0286 18.2958 19.1723 17.8107 19.1667 17.3158V4.16667C19.1653 3.062 18.7259 2.00297 17.9448 1.22185C17.1637 0.440735 16.1047 0.00132321 15 0L5 0C3.89534 0.00132321 2.8363 0.440735 2.05518 1.22185C1.27407 2.00297 0.834655 3.062 0.833332 4.16667V17.3158C0.827955 17.8111 0.972146 18.2964 1.24705 18.7084C1.52196 19.1204 1.91478 19.4399 2.37417 19.625Z" fill="#E1A60D"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_11_26">
                                <rect width="20" height="20" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>
                </div>
                <div onClick={() => {
                    $selectedNote.set(null);
                }} className="main_actions-close">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clipPath="url(#clip0_4_153)">
                            <path d="M13.0892 8.08917L11.1783 10L13.0892 11.9108C13.415 12.2367 13.415 12.7633 13.0892 13.0892C12.9267 13.2517 12.7133 13.3333 12.5 13.3333C12.2867 13.3333 12.0733 13.2517 11.9108 13.0892L10 11.1783L8.08917 13.0892C7.92667 13.2517 7.71333 13.3333 7.5 13.3333C7.28667 13.3333 7.07333 13.2517 6.91083 13.0892C6.585 12.7633 6.585 12.2367 6.91083 11.9108L8.82167 10L6.91083 8.08917C6.585 7.76333 6.585 7.23667 6.91083 6.91083C7.23667 6.585 7.76333 6.585 8.08917 6.91083L10 8.82167L11.9108 6.91083C12.2367 6.585 12.7633 6.585 13.0892 6.91083C13.415 7.23667 13.415 7.76333 13.0892 8.08917ZM20 10C20 15.5142 15.5142 20 10 20C4.48583 20 0 15.5142 0 10C0 4.48583 4.48583 0 10 0C15.5142 0 20 4.48583 20 10ZM18.3333 10C18.3333 5.405 14.595 1.66667 10 1.66667C5.405 1.66667 1.66667 5.405 1.66667 10C1.66667 14.595 5.405 18.3333 10 18.3333C14.595 18.3333 18.3333 14.595 18.3333 10Z" fill="#9B9B9B"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_4_153">
                                <rect width="20" height="20" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>

                </div>
            </>}
        </div>
    </>
}